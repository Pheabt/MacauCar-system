<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/Macau.png">
    <link rel="icon" type="image/png" href="/static/img/Macau.png">
    <title>澳门大学智能驾驶控制平台</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!--<meta name="renderer" content="webkit">-->
    <meta name="viewport" content="width=device-width, height=device-height,
     initial-scale=1, minimum-scale=1.0, user-scalable=no">
    <link href="/static/assert/css/index.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/bus/css/hailiang01/pageShow.css" th:href="@{/static/bus/css/hailiang01/pageShow.css}">
    <link rel="stylesheet" href="/static/bus/css/bootstrap.min.css" th:href="@{/static/bus/css/bootstrap.min.css}">
    <script type="text/javascript" src="/static/bus/js/jquery/jquery-3.3.1.min.js"
            th:src="@{/static/bus/js/jquery/jquery-3.3.1.min.js}"></script>
    <!-- <script type="text/javascript" src="/static/busss/js/verifyPage.js" th:src="@{/static/bus/js/verifyPage.js}"></script> -->

    <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

</head>
<body>
<div style="width: 100%; height: 100%; background-color: #1f212b;">
    <div id="container"  style="width: 100%; height: 100%;top: auto;text-align: center;"></div>
    <div id="www">
        <a href="javascript:WebSocketTest()">运行 WebSocket</a>
    </div>
</div>

<script type="text/javascript">

    function WebSocketTest()
         {
            if ("WebSocket" in window)
            {
               alert("您的浏览器支持 WebSocket!");
               
               // 打开一个 web socket
               var ws = new WebSocket("ws://localhost:9998/echo");
                
               ws.onopen = function()
               {
                  // Web Socket 已连接上，使用 send() 方法发送数据
                  ws.send("发送数据");
                  alert("数据发送中...");
               };
                
               ws.onmessage = function (evt) 
               { 
                  var received_msg = evt.data;
                  alert("数据已接收...");
               };
                
               ws.onclose = function()
               { 
                  // 关闭 websocket
                  alert("连接已关闭..."); 
               };
            }
            
            else
            {
               // 浏览器不支持 WebSocket
               alert("您的浏览器不支持 WebSocket!");
            }
         }

    var data = {
        "PosInfo":
        [
         {"CarID":0,"PosX":55,"PosY":348,"PosZ":1},
         {"CarID":1,"PosX":55,"PosY":348,"PosZ":1}
        ]
    };


    var dom = document.getElementById("container");
    var myChart2 = echarts.init(dom);
    var app = {};
    
    var datacar = [
                [61.5920703124999704, 621.66908482142856],
                [61.0651450892857, 521.13364955357144],
                [61.72844029017864, 421.13874162946433],
                [61.1817745535716, 321.1532505580358],
                [61.3734598214287,221.91196986607144],
                [61.2317885044645,121.9895368303571],
                [71.1503850446429, 101.1669921875],
                [76,91],
                [81,81],
                [91,71],
                [96,61],
                [101,51],
                [201,41],
                [301,41],
                [321,41],
                [330,61],
                [345,81],
                [360,101],
                [381,121],
                [381,141],
                [381,241],
                [381,341],
                [381,441],
                [381,541],
                [381,641],
                [381,741],
                [381,861],
                [361,871],
                [341,881],
                [311,891],
                [281,901],
                [251,917],
                [221,927],
                [181,917],
                [161,907],
                [141,897],
                [121,881],
                [101,861],
                [81,841],
                [61,821],
                [61,721],
                [61.5920703124999704, 621.66908482142856],
                ];


    var option2;

    $.get('/static/img/bg1.svg', function (svg) {
    echarts.registerMap('ksia-ext-plan', { svg: svg });
    option2 = {
        tooltip: {},
        geo: {
        map: 'ksia-ext-plan',
        roam: true,
        layoutCenter: ['50%', '50%'],
        layoutSize: '180%'
        },
        series: [
        {
            name: 'Route',
            type: 'lines',
            coordinateSystem: 'geo',
            geoIndex: 0,
            emphasis: {
            label: {
                show: false
            }
            },
            polyline: true,
            lineStyle: {
            color: '#c46e54',
            width: 0
            },
            effect: {
            show: true,
            period: 8,
            color: '#a10000',
            // constantSpeed: 80,
            trailLength: 0,
            symbolSize: [12, 30],
            symbol:
                'path://M87.1667 3.8333L80.5.5h-60l-6.6667 3.3333L.5 70.5v130l10 10h80l10 -10v-130zM15.5 190.5l15 -20h40l15 20zm75 -65l-15 5v35l15 15zm-80 0l15 5v35l-15 15zm65 0l15 -5v-40l-15 20zm-50 0l-15 -5v-40l15 20zm 65,-55 -15,25 c -15,-5 -35,-5 -50,0 l -15,-25 c 25,-15 55,-15 80,0 z'
            },
            z: 100,
            data: [
             {
                effect: {
                color: '#997405',
                constantSpeed: 60,
                delay: 0
                },
                coords: datacar,
            }
            ]
        }
        ]
    };
    myChart2.setOption(option2);
    });

    if (option2 && typeof option2 === 'object') {
        myChart2.setOption(option2);
    }




</script>


</body>
</html>
